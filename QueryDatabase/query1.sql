WITH t1 AS (select d1.id AS dialog, u1.name AS author FROM public.dialogs AS d1 INNER JOIN public.user AS u1 ON d1.author = u1.id), t2 AS(SELECT d2.id_dialogs, u2.id, u2.name FROM public.user AS u2 INNER JOIN public.user_dialogs AS d2 ON u2.id = d2.id_participant) SELECT t1.author, t2.id, t2.name AS participant FROM t1 INNER JOIN t2 ON t1.dialog = t2.id_dialogs WHERE t1.author = 'User3'